<div id="session-header">
	<div id="info">
		<div id="img-stats">
			<a id="img" href="" onclick="$('#image-edit-file').click()">
				<img ng-src="{{session.image}}" width="150" height="150" />
			</a>
			<div ng-switch="session.state">
				<div id="time-left" ng-switch-when="running">
					Ends {{session.end_time | countdown}}
				</div>
				<div id="time-left" ng-switch-when="before">
					Starts {{session.start_time | countdown}}
				</div>
				<div id="time-left" ng-switch-when="after">
					Ended {{session.end_time | countdown}}
				</div>
			</div>
			<div id="viewers" ng-if="session.state == 'running'">
				{{session.num_viewers}} currently viewing
			</div>
			<div id="views" ng-if="session.state != 'running'">
				<ng-pluralize count="session.views"
				when="{'one': '1 view',
				'other': '{} views'}">
				</ng-pluralize>
			</div>
			<a id="twitter-name" href="//twitter.com/{{session.twitter}}" ng-if="session.twitter" target="_blank">
				@{{session.twitter}}
			</a>
		</div>
		<div id="title-desc">
			<h2><span ng-show="state.edit != 'title'" ng-click="!state.owner || (state.edit='title')">{{session.title}}</span><input id="edit-title" ng-model="session.title" ng-show="state.edit == 'title'" focus-on-show ng-blur="edit('title', session.title)"/><span id="live" ng-if="session.state == 'running'">[LIVE]</span></h2>
			<textarea ng-model="session.desc" ng-show="state.edit == 'desc'" focus-on-show ng-blur="edit('desc', session.desc)"></textarea>
			<div id="desc" ng-bind-html="session.desc | markdown"></div>
			<a href="" ng-if="state.owner" ng-show="state.edit != 'desc'" ng-click="!state.owner || (state.edit = 'desc')" ng-show="state.edit != 'desc'">[Edit Description]</a>
		</div>
	</div>
</div>
<div id="session-ask" ng-if="session.state != 'after' && tab !='question'">
	<div id="ask-box">
		<h2>Ask {{session.name}}:</h2>
		<textarea ng-model="question"></textarea>
		<a id="ask-btn" class="clickable" ng-click="ask(question)">ASK!</a>
	</div>
</div>
<div id="questions-area">
	<div id="questions">
		<div id="filter">
			<div id="text">
				<a class="filter-options" ng-if="tab == 'question'" ng-href="/s/{{sessionId}}">Return to session </a>
				<span ng-if="tab != 'question'">
				<a class="filter-options" ng-class="{current: tab == 'unanswered'}" ng-href="/s/{{sessionId}}/unanswered"> Unanswered </a> | 
				<a class="filter-options" ng-class="{current: tab == 'answered'}" ng-href="/s/{{sessionId}}/answered"> Answered </a>|
				<a class="filter-options" ng-class="{current: tab == 'starred'}" ng-href="/s/{{sessionId}}/starred"> Starred</a></span>
			</div>
		</div>
		<div id="no-questions" ng-if="!session.questions.length">
			There is nothing here. Be the first to ask a question!
		</div>
		<div id="answered">
			<div id="pair" ng-repeat="question in session.questions | filter:qfilter | orderBy:'-score'">
				<div id="vote">
					<a class="clickable" ng-click="vote(question, 1)" ng-class="{upvote: question.vote == 1}">&#x25B2;</a><br/>
					<a class="clickable" ng-click="vote(question, -1)" ng-class="{downvote: question.vote == -1}">&#x25BC;</a>
				</div>
				<div id="question">
					<div id="user-picture">
						<a ng-href="/u/{{question.asker.username}}" target="_self">
							<img class="circular" src="http://www.biography.com/imported/images/Biography/Images/Profiles/S/Will-Smith-9542165-1-402.jpg" width="75" height="75" />
						</a>
					</div>
					<div id="main">
						<div id="top-row">
							<a id="user-name" ng-href="/u/{{question.asker.username}}" target="_self">{{question.asker.display}}</a>
							<div id="timestamp">{{question.created | countdown}}</div>
							<a class="clickable" ng-if="state.owner && session.state == 'running'" ng-click="question.answerdraft = true; state.edit = 'answer'">reply</a>
							<a class="clickable" ng-if="state.owner && question.starred" ng-click="star(question, false)">unstar</a>
							<a class="clickable" ng-if="state.owner && !question.starred" ng-click="star(question, true)">star</a>
							<a ng-href="/q/{{question.id}}">permalink</a>
							<div id="votes">
								<ng-pluralize count="question.score"
								when="{'0': '0 votes',
								'one': '1 vote',
								'other': '{} votes'}">
								</ng-pluralize>
							</div>
						</div>
						<br/>
						<div id="text" ng-bind-html="question.question | markdown">
						</div>
					</div>
				</div>
				<div id="response" ng-if="question.answered || question.answerdraft">
					<div id="user-picture">
						<a ng-href="/u/{{session.owner.username}}" target="_self">
							<img class="circular" ng-src="{{session.image}}" width="75" height="75" />
						</a>
					</div>
					<div id="main">
						<div id="top-row">
							<a id="user-name" ng-href="/u/{{session.owner.username}}" target="_self">{{session.owner.display}}</a>
							<div id="timestamp" ng-if="question.answered">{{question.answer.created | countdown}}</div>
						</div>
						<br/>
						<div id="text" ng-bind-html="question.answer.response | markdown" ng-if="!question.answerdraft">
						</div>
						<textarea ng-if="state.owner" ng-show="question.answerdraft" ng-model="question.answer.response" focus-on-show ng-blur="answer(question, $index, question.answer.response)"></textarea>
					</div>						
				</div>
			</div>
		</div>
	</div>
</div>
